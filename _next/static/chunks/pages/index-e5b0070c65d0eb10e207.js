(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5774:function(e,t,n){"use strict";n.d(t,{h:function(){return u}});var r=n(9008),a=n(1664),c=n(5602),i=n(682),s=n(2062),o=n(5893),u=function(e){var t=e.title,n=e.activeKey;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(r.default,{children:[(0,o.jsx)("title",{children:t}),(0,o.jsx)("meta",{name:"description",content:"Vitals Recording"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,o.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"}),(0,o.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),(0,o.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),(0,o.jsx)("link",{rel:"manifest",href:"/site.webmanifest"}),(0,o.jsx)("meta",{name:"theme-color",content:"#bc7100"})]}),(0,o.jsx)(c.Z,{bg:"dark",expand:"md",fixed:"top",variant:"dark",className:"card-1",children:(0,o.jsxs)(i.Z,{fluid:!0,children:[(0,o.jsx)(c.Z.Brand,{children:"Vitals Recorder"}),(0,o.jsx)(c.Z.Toggle,{"aria-controls":"navbar-toggleable"}),(0,o.jsx)(c.Z.Collapse,{id:"navbar-toggleable",children:(0,o.jsxs)(s.Z,{activeKey:n,className:"justify-content-end mr-auto",children:[(0,o.jsx)(a.default,{href:"/",passHref:!0,children:(0,o.jsx)(s.Z.Link,{eventKey:"home",children:"Home"})}),(0,o.jsx)(a.default,{href:"/plot",passHref:!0,children:(0,o.jsx)(s.Z.Link,{eventKey:"plot",children:"Plot"})})]})})]})})]})}},8614:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var r=n(5774),a=n(2809),c=n(7294),i=n(640),s=n(5005),o=n(266),u=n(8216),l=n(5997),d=n(809),f=n.n(d),v=n(3029),h=function(){function e(){(0,u.Z)(this,e)}return(0,l.Z)(e,null,[{key:"db",get:function(){return this.createDbIfNotExists()}},{key:"createDbIfNotExists",value:function(){var t=(0,o.Z)(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(n=e._db)||void 0===n){t.next=4;break}t.t0=n,t.next=7;break;case 4:return t.next=6,(0,v.X3)(e._dbName,1,{upgrade:function(t,n,r,a){t.objectStoreNames.contains(e._collName)||t.createObjectStore(e._collName,{keyPath:e._keyPath})}});case 6:t.t0=t.sent;case 7:return r=t.t0,t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"add",value:function(){var t=(0,o.Z)(f().mark((function t(n){var r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.db;case 2:return r=t.sent,t.abrupt("return",r.add(e._collName,n));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"get",value:function(){var t=(0,o.Z)(f().mark((function t(n){var r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.db;case 2:return r=t.sent,t.abrupt("return",r.get(e._collName,n));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getAll",value:function(){var t=(0,o.Z)(f().mark((function t(){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.db;case 2:return n=t.sent,t.abrupt("return",n.getAll(e._collName,void 0));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getFromOffset",value:function(){var e=(0,o.Z)(f().mark((function e(t,n){var r,a,c,i,s,o,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=u.length>2&&void 0!==u[2]&&u[2],e.next=3,this.db;case 3:return e.next=5,e.sent.transaction("readings","readonly").store.openCursor(void 0,c?"prev":"next");case 5:if(i=e.sent,!(t>0)){e.next=19;break}return e.next=9,null===(a=i)||void 0===a?void 0:a.advance(t);case 9:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=13;break}e.t0=void 0!==r;case 13:if(!e.t0){e.next=17;break}e.t2=r,e.next=18;break;case 17:e.t2=null;case 18:i=e.t2;case 19:s=0,o=[];case 21:if(!i||!(void 0===n||s<n)){e.next=29;break}return o.push(i.value),s++,e.next=26,i.continue();case 26:i=e.sent,e.next=21;break;case 29:return e.abrupt("return",o);case 30:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=(0,o.Z)(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db;case 2:return t=e.sent,e.abrupt("return",t.clear("readings"));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var t=(0,o.Z)(f().mark((function t(n){var r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.db;case 2:return r=t.sent,t.abrupt("return",r.delete(e._collName,n));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),e}();(0,a.Z)(h,"_dbName","vir"),(0,a.Z)(h,"_collName","readings"),(0,a.Z)(h,"_keyPath","date"),(0,a.Z)(h,"_db",null);var p;!function(e){e[e.tempIsCelcius=0]="tempIsCelcius"}(p||(p={}));var x,g,m=function(){function e(){(0,u.Z)(this,e)}return(0,l.Z)(e,null,[{key:"get",value:function(e,t){var n;return null!==(n=localStorage.getItem(p[e]))&&void 0!==n?n:t}},{key:"put",value:function(e,t){return localStorage.setItem(e,t)}},{key:"clear",value:function(){return localStorage.clear()}}]),e}();!function(e){e[e.TEMP=0]="TEMP",e[e.OXY=1]="OXY",e[e.PULSE=2]="PULSE",e[e.BP=3]="BP",e[e.SL=4]="SL"}(g||(g={}));var j=(x={},(0,a.Z)(x,g.TEMP,"Temperature"),(0,a.Z)(x,g.OXY,"Blood Oxygen Levels"),(0,a.Z)(x,g.PULSE,"Pulse"),(0,a.Z)(x,g.BP,"Blood Pressure"),(0,a.Z)(x,g.SL,"Blood Glucose"),x);function b(e){return j[e]}function y(e){switch(e.itemType){case g.TEMP:var t=function(e){return"yes"===m.get(p.tempIsCelcius,"no")?{unitString:" \xb0C",num:5*e}:{unitString:" \xb0F",num:9*e+32}}(e.value),n=t.unitString,r=t.num;return"".concat(r," ").concat(n);case g.BP:return"".concat(e.value," mm Hg.");case g.OXY:return"".concat(e.value,"% SpO2");case g.PULSE:return"".concat(e.value," bpm");case g.SL:return"".concat(e.value," mg/dl")}}var k=n(2503);function Z(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return"".concat(e,":").concat(n,":").concat(null!==r&&void 0!==r?r:"",":").concat(t)}var w=n(5881),O=n(4908),P={year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"},S=n(5893),_=function(e){var t=e.date,n=e.eventKey,r=e.itemType,a=e.desc,u=(0,c.useState)(!1),l=u[0],d=u[1],v=function(){return d(!1)},p=function(){var e=(0,o.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.delete(t);case 3:d(!1),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Failed to delete",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(w.Z,{bg:"dark",children:[(0,S.jsx)(i.Z.Toggle,{as:w.Z.Header,eventKey:n,children:"".concat(t.toLocaleString("en-us",P)," ").concat(b(r)," - ").concat(y(e))}),(0,S.jsx)(i.Z.Collapse,{eventKey:n,children:(0,S.jsxs)(w.Z.Body,{children:[(0,S.jsxs)(w.Z.Text,{children:[b(r)," - ",y(e),(0,S.jsx)("br",{}),a]}),(0,S.jsx)(s.Z,{variant:"primary",onClick:function(){return d(!0)},children:"Delete"})]})})]}),(0,S.jsxs)(O.Z,{show:l,onHide:v,children:[(0,S.jsx)(O.Z.Header,{children:"Delete?"}),(0,S.jsx)(O.Z.Body,{children:"Confirm Delete?"}),(0,S.jsxs)(O.Z.Footer,{children:[(0,S.jsx)(s.Z,{variant:"secondary",onClick:v,children:"Cancel"}),(0,S.jsx)(s.Z,{variant:"primary",onClick:p,children:"Confirm"})]})]})]})};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(){var e,t,n=(0,c.useState)(10),r=n[0],a=(n[1],function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return(0,k.ZP)(Z(e,t,n,r),(function(){return h.getFromOffset(n,r,t)}),a)}("getVal",!0,void 0,r,{refreshInterval:2e3})),o=a.data,u=a.error,l=a.mutate;return u&&(t=(0,S.jsxs)("div",{children:["Error ",u.toString()]})),t=o?0===(null!==(e=o.length)&&void 0!==e?e:0)?(0,S.jsx)("div",{children:"No data"}):(0,S.jsx)(i.Z,{children:o.map((function(e){return(0,S.jsx)(_,E(E({},e),{},{eventKey:JSON.stringify(e)}),JSON.stringify(e))}))}):(0,S.jsx)("div",{children:"Loading"}),(0,S.jsxs)(S.Fragment,{children:[t,(0,S.jsx)("br",{}),(0,S.jsx)(s.Z,{onClick:function(e){h.add(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.TEMP,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return{itemType:e,date:t,value:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,desc:arguments.length>3&&void 0!==arguments[3]?arguments[3]:""}}(0)),l(void 0,!0)},children:"Add"}),(0,S.jsx)("br",{}),(0,S.jsx)(s.Z,{onClick:function(e){h.clear(),l(void 0,!0)},children:"Clear"}),(0,S.jsx)("br",{})]})},L=n(682),T=function(){return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(r.h,{title:"Log",activeKey:"home"}),(0,S.jsx)(L.Z,{children:(0,S.jsx)(C,{})})]})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8614)}])}},function(e){e.O(0,[774,521,213,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);