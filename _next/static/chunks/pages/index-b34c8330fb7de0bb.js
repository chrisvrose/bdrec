(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(183)}])},8969:function(e,n,t){"use strict";t.d(n,{h:function(){return d}});var r=t(5893),i=t(9008),a=t.n(i),c=t(1664),s=t.n(c),o=t(4108),u=t(682),l=t(4973),d=function(e){var n=e.title,t=e.activeKey;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:n}),(0,r.jsx)("meta",{name:"description",content:"Vitals Recording"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,r.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),(0,r.jsx)("link",{rel:"manifest",href:"/site.webmanifest"}),(0,r.jsx)("meta",{name:"theme-color",content:"#bc7100"})]}),(0,r.jsx)(o.Z,{bg:"dark",expand:"md",fixed:"top",variant:"dark",className:"card-1",children:(0,r.jsxs)(u.Z,{fluid:!0,children:[(0,r.jsx)(o.Z.Brand,{children:"Vitals Recorder"}),(0,r.jsx)(o.Z.Toggle,{"aria-controls":"navbar-toggleable"}),(0,r.jsx)(o.Z.Collapse,{id:"navbar-toggleable",children:(0,r.jsxs)(l.Z,{activeKey:t,className:"justify-content-end mr-auto",children:[(0,r.jsx)(s(),{href:"/",passHref:!0,children:(0,r.jsx)(l.Z.Link,{eventKey:"home",children:"Home"})}),false,(0,r.jsx)(s(),{href:"/settings",passHref:!0,children:(0,r.jsx)(l.Z.Link,{eventKey:"settings",children:"Settings"})})]})})]})})]})}},9414:function(e,n,t){"use strict";t.d(n,{i:function(){return a},u:function(){return r}});var r,i=t(1438);!function(e){e[e.tempIsCelcius=0]="tempIsCelcius"}(r||(r={}));var a=function(){function e(){(0,i.Z)(this,e)}return e.getBoolean=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=this.get(e,String(n));return"true"===t},e.putBoolean=function(e,n){return this.put(e,String(n))},e.get=function(e,n){var t;return null!==(t=localStorage.getItem(r[e]))&&void 0!==t?t:n},e.put=function(e,n){return localStorage.setItem(r[e],n)},e.clear=function(){return localStorage.clear()},e}()},183:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return X}});var r,i=t(5893),a=t(8969),c=t(7568),s=t(7582),o=t(7294),u=t(5172),l=t(4051),d=t(1555),h=t(9798),f=t(2086),g=t(8125),v=t(4456),x=t(5005),m=t(1387),p=t(4924),Z=t(9414);!function(e){e[e.TEMP=0]="TEMP",e[e.OXY=1]="OXY",e[e.PULSE=2]="PULSE",e[e.SUGAR_LEVEL=3]="SUGAR_LEVEL"}(r||(r={}));var E,j=[r.TEMP,r.OXY,r.PULSE,r.SUGAR_LEVEL],_=(E={},(0,p.Z)(E,r.TEMP,"Temperature"),(0,p.Z)(E,r.OXY,"Blood Oxygen Level"),(0,p.Z)(E,r.PULSE,"Pulse"),(0,p.Z)(E,r.SUGAR_LEVEL,"Blood Glucose"),E);function C(e){return _[e]}function L(e){switch(e.itemType){case r.TEMP:var n=function(e){return Z.i.getBoolean(Z.u.tempIsCelcius,!1)?{unitString:" \xb0C",num:5*e}:{unitString:" \xb0F",num:9*e+32}}(e.value),t=n.unitString,i=n.num;return"".concat(i.toFixed(2)," ").concat(t);case r.OXY:return"".concat(e.value,"% SpO2");case r.PULSE:return"".concat(e.value," bpm");case r.SUGAR_LEVEL:return"".concat(e.value," mg/dl")}}var b,y,S,N={year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"},O=(b={},(0,p.Z)(b,r.OXY,{addFormHeadingText:"Add Oxygen reading",addLabel:"SpO2 reading (%)",addPlaceHolder:C(r.OXY)}),(0,p.Z)(b,r.TEMP,{addFormHeadingText:"Add Temperature reading",addLabel:"Temperature reading",addPlaceHolder:C(r.TEMP)}),(0,p.Z)(b,r.PULSE,{addFormHeadingText:"Add Pulse Reading",addLabel:"Pulse Reading (bpm)",addPlaceHolder:C(r.PULSE)}),(0,p.Z)(b,r.SUGAR_LEVEL,{addFormHeadingText:"Add Blood Sugar Reading",addLabel:"Blood Sugar levels (mg/dl)",addPlaceHolder:C(r.SUGAR_LEVEL)}),b),T={inputValueStep:(y={},(0,p.Z)(y,r.TEMP,.1),(0,p.Z)(y,r.OXY,1),(0,p.Z)(y,r.SUGAR_LEVEL,1),(0,p.Z)(y,r.PULSE,1),y),inputValueMax:(S={},(0,p.Z)(S,r.TEMP,150),(0,p.Z)(S,r.OXY,100),(0,p.Z)(S,r.SUGAR_LEVEL,300),(0,p.Z)(S,r.PULSE,300),S)};function w(e,n){return T[n][e]}var A=t(1438),P=t(2951),I=t(8957),M=function(){function e(){(0,A.Z)(this,e)}return e.createDbIfNotExists=function(){return(0,c.Z)((function(){var n,t;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return null===(n=e._db)||void 0===n?[3,1]:(t=n,[3,3]);case 1:return[4,(0,I.X3)(e.DB_NAME,1,{upgrade:function(n,t,r,i){n.objectStoreNames.contains(e.COLLECTION_NAME)||n.createObjectStore(e.COLLECTION_NAME,{keyPath:e.COLLECTION_INDEX_KEY_NAME})}})];case 2:t=r.sent(),r.label=3;case 3:return[2,t]}}))}))()},e.add=function(n){var t=this;return(0,c.Z)((function(){return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.db];case 1:return[2,r.sent().add(e.COLLECTION_NAME,n)]}}))}))()},e.edit=function(n,t){var r=this;return(0,c.Z)((function(){return(0,s.__generator)(this,(function(i){switch(i.label){case 0:return[4,r.db];case 1:return[2,i.sent().put(e.COLLECTION_NAME,t,n)]}}))}))()},e.get=function(n){var t=this;return(0,c.Z)((function(){return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.db];case 1:return[2,r.sent().get(e.COLLECTION_NAME,n)]}}))}))()},e.getAll=function(){var n=this;return(0,c.Z)((function(){return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return[4,n.db];case 1:return[2,t.sent().getAll(e.COLLECTION_NAME,void 0)]}}))}))()},e.getFromOffset=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this;return(0,c.Z)((function(){var a,c,o,u,l;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return[4,i.db];case 1:return[4,(a=s.sent().transaction(e.COLLECTION_NAME,"readonly")).store.openCursor(void 0,r?"prev":"next")];case 2:return c=s.sent(),n>0?[4,null===c||void 0===c?void 0:c.advance(n)]:[3,4];case 3:c=null!==(o=s.sent())&&void 0!==o?o:null,s.label=4;case 4:u=0,l=[],s.label=5;case 5:return c&&(void 0===t||u<t)?(l.push(c.value),u++,[4,c.continue()]):[3,7];case 6:return c=s.sent(),[3,5];case 7:return a.commit(),[2,l]}}))}))()},e.getCount=function(){var n=this;return(0,c.Z)((function(){return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return[4,n.db];case 1:return[2,t.sent().count(e.COLLECTION_NAME)]}}))}))()},e.clear=function(){var n=this;return(0,c.Z)((function(){return(0,s.__generator)(this,(function(t){switch(t.label){case 0:return[4,n.db];case 1:return[2,t.sent().clear(e.COLLECTION_NAME)]}}))}))()},e.delete=function(n){var t=this;return(0,c.Z)((function(){return(0,s.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.db];case 1:return[2,r.sent().delete(e.COLLECTION_NAME,n)]}}))}))()},(0,P.Z)(e,null,[{key:"db",get:function(){return this.createDbIfNotExists()}}]),e}();M.DB_NAME="vir",M.COLLECTION_NAME="readings",M.COLLECTION_INDEX_KEY_NAME="date",M._db=null;var k=t(3288);function F(e,n,t,r){return"".concat(e,":").concat(t,":").concat(null!==r&&void 0!==r?r:"",":").concat(n)}var H=t(2255),D=function(e){var n=e.item,t=e.eventKey,r=e.updateData,a=e.setSelectedEditItem,l=e.setShowEditModal,d=n.date,h=n.itemType,g=n.desc,v=(0,o.useState)(!1),p=v[0],Z=v[1],E=function(){return Z(!1)},j=function(){var e=(0,c.Z)((function(){var e;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,M.delete(d)];case 1:return n.sent(),Z(!1),[4,r()];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),console.log("Failed to delete",e),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(H.Z,{bg:"dark",children:[(0,i.jsx)(u.Z.Toggle,{as:H.Z.Header,eventKey:t,children:"".concat(d.toLocaleString("en-us",N)," ").concat(C(h)," - ").concat(L(n))}),(0,i.jsx)(u.Z.Collapse,{eventKey:t,children:(0,i.jsxs)(H.Z.Body,{children:[(0,i.jsxs)(H.Z.Text,{children:[C(h)," - ",L(n),(0,i.jsx)("br",{}),g]}),(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(x.Z,{variant:"secondary",onClick:function(){a(n),l(!0)},children:"Edit"}),(0,i.jsx)(x.Z,{variant:"warning",onClick:function(){return Z(!0)},children:"Delete"})]})]})})]}),(0,i.jsxs)(m.Z,{show:p,onHide:E,children:[(0,i.jsx)(m.Z.Header,{children:"Delete?"}),(0,i.jsx)(m.Z.Body,{children:"Confirm Delete?"}),(0,i.jsxs)(m.Z.Footer,{children:[(0,i.jsx)(x.Z,{variant:"secondary",onClick:E,children:"Cancel"}),(0,i.jsx)(x.Z,{variant:"primary",onClick:j,children:"Confirm"})]})]})]})},U=t(4835),B=function(e){var n=e.showCreateForm,t=e.itemType,a=e.existingItem,u=e.setShowCreateForm,l=e.setExistingItem,d=e.updateData,h=(0,o.useRef)(null);return(0,o.useEffect)((function(){n?null!==a&&(null!=h.current&&(h.current.numinput.value=a.value,h.current.desc.value=a.desc),t!==a.itemType&&console.warn("Detected mismatch, please report",t,a)):l(null)}),[n]),(0,i.jsx)(m.Z,{show:n,onHide:function(){l(null),u(!1)},children:(0,i.jsxs)(U.Z,{ref:h,onSubmit:function(){var e=(0,c.Z)((function(e){var n,i,c,o;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return e.preventDefault(),n=e.target,i=parseInt(n.numinput.value),c=n.desc.value,o=function(e){return e.itemType===r.TEMP&&(e.value=function(e){return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?(e-32)/9:e/5}(e.value,Z.i.getBoolean(Z.u.tempIsCelcius))),e}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.TEMP,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return{itemType:e,date:n,value:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,desc:arguments.length>3&&void 0!==arguments[3]?arguments[3]:""}}(t,null===a||void 0===a?void 0:a.date,i,c)),[4,M.edit(null===a||void 0===a?void 0:a.date,o)];case 1:return s.sent(),u(!1),[4,d()];case 2:return s.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),children:[(0,i.jsx)(m.Z.Header,{children:O[t].addFormHeadingText}),(0,i.jsxs)(m.Z.Body,{children:[(0,i.jsxs)(U.Z.Group,{children:[(0,i.jsx)(U.Z.Label,{children:O[t].addLabel}),(0,i.jsx)(U.Z.Control,{placeholder:O[t].addPlaceHolder,type:"number",name:"numinput",min:0,max:w(t,"inputValueMax"),step:w(t,"inputValueStep"),value:null===a||void 0===a?void 0:a.value})]}),(0,i.jsxs)(U.Z.Group,{controlId:"exampleForm.ControlTextarea1",children:[(0,i.jsx)(U.Z.Label,{children:"Description"}),(0,i.jsx)(U.Z.Control,{as:"textarea",rows:3,placeholder:"Description -- E.g. Medicines taken (Optional)",name:"desc"})]})]}),(0,i.jsxs)(m.Z.Footer,{children:[(0,i.jsx)(x.Z,{variant:"secondary",onClick:function(){u(!1)},children:"Cancel"}),(0,i.jsx)(x.Z,{variant:"primary",type:"submit",children:"Confirm"})]})]})})},R=function(){var e=(0,o.useState)(0),n=e[0],t=e[1],a=15*n,p=(0,o.useState)(0),Z=p[0],E=p[1];function _(){return L.apply(this,arguments)}function L(){return(L=(0,c.Z)((function(){var e;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,M.getCount()];case 1:return e=n.sent(),E(Math.ceil(e/15)),[2]}}))}))).apply(this,arguments)}(0,o.useEffect)((function(){_().catch((function(e){return console.error("Error fetching page count",e)}))}),[]);var b,y,S=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return(0,k.ZP)(F(e,n,t,r),(function(){return M.getFromOffset(t,r,n)}),i)}("getVal",!0,a,15,{refreshInterval:2e3}),N=S.data,O=S.error,T=S.mutate,w=function(){var e=(0,c.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,_()];case 1:return e.sent(),[4,T(void 0,!0)];case 2:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),A=(0,o.useState)(!1),P=A[0],I=A[1],H=(0,o.useState)(r.TEMP),U=H[0],R=H[1],V=(0,o.useState)(!1),X=V[0],G=V[1],K=(0,o.useState)(null),Y=K[0],z=K[1],J=function(){var e=(0,c.Z)((function(){var e;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,M.clear()];case 1:return n.sent(),[4,w()];case 2:return n.sent(),I(!1),[3,4];case 3:return e=n.sent(),console.log("Failed to clear",e),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return b=O?(0,i.jsxs)("div",{children:["Error ",O.toString()]}):N?0===(null!==(y=N.length)&&void 0!==y?y:0)?(0,i.jsx)("div",{style:{textAlign:"center"},children:"Nothing here yet! :)"}):(0,i.jsx)(u.Z,{children:N.map((function(e){return(0,i.jsx)(D,{item:e,eventKey:JSON.stringify(e),setSelectedEditItem:z,setShowEditModal:G,updateData:w},JSON.stringify(e))}))}):(0,i.jsx)("div",{children:"Loading"}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.Z,{style:{textAlign:"center"},md:8,children:(0,i.jsx)(d.Z,{md:{span:6,offset:3},children:(0,i.jsxs)(h.Z,{className:"justify-content-between",children:[(0,i.jsx)(f.Z,{"aria-label":"Buttons",className:"spacer-top-margin",children:(0,i.jsx)(g.Z,{as:f.Z,title:"Add",children:j.map((function(e,n){return(0,i.jsx)(v.Z.Item,{eventKey:"".concat(n),onClick:function(){R(e),G(!0)},children:C(e)},e)}))})}),(0,i.jsxs)(f.Z,{className:"spacer-top-margin",children:[(0,i.jsx)(x.Z,{onClick:function(){return w()},children:"Refresh"}),(0,i.jsx)(x.Z,{onClick:function(){return I(!0)},children:"Clear"})]})]})})}),(0,i.jsxs)(m.Z,{show:P,onHide:function(){return I(!1)},children:[(0,i.jsx)(m.Z.Header,{children:"Clear?"}),(0,i.jsx)(m.Z.Body,{children:"Confirm Clearing all entries?"}),(0,i.jsxs)(m.Z.Footer,{children:[(0,i.jsx)(x.Z,{variant:"secondary",onClick:function(){return I(!1)},children:"Cancel"}),(0,i.jsx)(x.Z,{variant:"danger",onClick:J,children:"Confirm"})]})]}),(0,i.jsx)(B,{itemType:U,showCreateForm:X,setShowCreateForm:G,updateData:w,existingItem:Y,setExistingItem:z}),(0,i.jsx)("br",{}),b,(0,i.jsx)(l.Z,{style:{textAlign:"center"},md:8,children:(0,i.jsx)(d.Z,{md:{span:6,offset:3},children:Z>0&&(0,i.jsxs)(f.Z,{className:"spacer-top-margin-lot",children:[(0,i.jsx)(x.Z,{disabled:n<=1,onClick:function(){t(n>Z||n<1?0:n-1)},children:"Prev"}),(0,i.jsx)(x.Z,{disabled:!0,children:"".concat(n+1,"/").concat(Z)}),(0,i.jsx)(x.Z,{disabled:n+1>=Z,onClick:function(){n<Z-1&&t(n+1)},children:"Next"})]})})}),(0,i.jsx)("div",{className:"spacer-top-margin-lot"})]})},V=t(682),X=function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.h,{title:"Log",activeKey:"home"}),(0,i.jsx)(V.Z,{children:(0,i.jsx)(R,{})})]})}}},function(e){e.O(0,[365,985,433,774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);