(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(2162)}])},8969:function(e,n,t){"use strict";t.d(n,{h:function(){return d}});var r=t(5893),i=t(9008),a=t.n(i),c=t(1664),s=t.n(c),u=t(4108),o=t(682),l=t(4973),d=function(e){var n=e.title,t=e.activeKey;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:n}),(0,r.jsx)("meta",{name:"description",content:"Vitals Recording"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,r.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),(0,r.jsx)("link",{rel:"manifest",href:"/site.webmanifest"}),(0,r.jsx)("meta",{name:"theme-color",content:"#bc7100"})]}),(0,r.jsx)(u.Z,{bg:"dark",expand:"md",fixed:"top",variant:"dark",className:"card-1",children:(0,r.jsxs)(o.Z,{fluid:!0,children:[(0,r.jsx)(u.Z.Brand,{children:"Vitals Recorder"}),(0,r.jsx)(u.Z.Toggle,{"aria-controls":"navbar-toggleable"}),(0,r.jsx)(u.Z.Collapse,{id:"navbar-toggleable",children:(0,r.jsxs)(l.Z,{activeKey:t,className:"justify-content-end mr-auto",children:[(0,r.jsx)(s(),{href:"/",passHref:!0,children:(0,r.jsx)(l.Z.Link,{eventKey:"home",children:"Home"})}),false,(0,r.jsx)(s(),{href:"/settings",passHref:!0,children:(0,r.jsx)(l.Z.Link,{eventKey:"settings",children:"Settings"})})]})})]})})]})}},1178:function(e,n,t){"use strict";t.d(n,{x:function(){return u}});var r=t(7568),i=t(1438),a=t(2951),c=t(7582),s=t(8957),u=function(){function e(){(0,i.Z)(this,e)}return e.createDbIfNotExists=function(){return(0,r.Z)((function(){var n,t;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return null===(n=e._db)||void 0===n?[3,1]:(t=n,[3,3]);case 1:return[4,(0,s.X3)(e.DB_NAME,1,{upgrade:function(n,t,r,i){n.objectStoreNames.contains(e.COLLECTION_NAME)||n.createObjectStore(e.COLLECTION_NAME,{keyPath:e.COLLECTION_INDEX_KEY_NAME})}})];case 2:t=r.sent(),r.label=3;case 3:return[2,t]}}))}))()},e.add=function(n){var t=this;return(0,r.Z)((function(){return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.db];case 1:return[2,r.sent().add(e.COLLECTION_NAME,n)]}}))}))()},e.edit=function(n,t){var i=this;return(0,r.Z)((function(){return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return[4,i.db];case 1:return[2,n.sent().put(e.COLLECTION_NAME,t)]}}))}))()},e.get=function(n){var t=this;return(0,r.Z)((function(){return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.db];case 1:return[2,r.sent().get(e.COLLECTION_NAME,n)]}}))}))()},e.getAll=function(){var n=this;return(0,r.Z)((function(){return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,n.db];case 1:return[2,t.sent().getAll(e.COLLECTION_NAME,void 0)]}}))}))()},e.getFromOffset=function(n,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this;return(0,r.Z)((function(){var r,s,u,o,l;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return[4,a.db];case 1:return[4,(r=c.sent().transaction(e.COLLECTION_NAME,"readonly")).store.openCursor(void 0,i?"prev":"next")];case 2:return s=c.sent(),n>0?[4,null===s||void 0===s?void 0:s.advance(n)]:[3,4];case 3:s=null!==(u=c.sent())&&void 0!==u?u:null,c.label=4;case 4:o=0,l=[],c.label=5;case 5:return s&&(void 0===t||o<t)?(l.push(s.value),o++,[4,s.continue()]):[3,7];case 6:return s=c.sent(),[3,5];case 7:return r.commit(),[2,l]}}))}))()},e.getCount=function(){var n=this;return(0,r.Z)((function(){return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,n.db];case 1:return[2,t.sent().count(e.COLLECTION_NAME)]}}))}))()},e.clear=function(){var n=this;return(0,r.Z)((function(){return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,n.db];case 1:return[2,t.sent().clear(e.COLLECTION_NAME)]}}))}))()},e.delete=function(n){var t=this;return(0,r.Z)((function(){return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.db];case 1:return[2,r.sent().delete(e.COLLECTION_NAME,n)]}}))}))()},(0,a.Z)(e,null,[{key:"db",get:function(){return this.createDbIfNotExists()}}]),e}();u.DB_NAME="vir",u.COLLECTION_NAME="readings",u.COLLECTION_INDEX_KEY_NAME="date",u._db=null},9414:function(e,n,t){"use strict";t.d(n,{i:function(){return a},u:function(){return r}});var r,i=t(1438);!function(e){e[e.tempIsCelcius=0]="tempIsCelcius"}(r||(r={}));var a=function(){function e(){(0,i.Z)(this,e)}return e.getBoolean=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=this.get(e,String(n));return"true"===t},e.putBoolean=function(e,n){return this.put(e,String(n))},e.get=function(e,n){var t;return null!==(t=localStorage.getItem(r[e]))&&void 0!==t?t:n},e.put=function(e,n){return localStorage.setItem(r[e],n)},e.clear=function(){return localStorage.clear()},e}()},2162:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return B}});var r,i=t(5893),a=t(8969),c=t(7568),s=t(7582),u=t(7294),o=t(5172),l=t(4051),d=t(1555),h=t(9798),f=t(2086),v=t(8125),x=t(4456),g=t(5005),m=t(1387),p=t(4924),Z=t(9414);!function(e){e[e.TEMP=0]="TEMP",e[e.OXY=1]="OXY",e[e.PULSE=2]="PULSE",e[e.SUGAR_LEVEL=3]="SUGAR_LEVEL"}(r||(r={}));var E,j=[r.TEMP,r.OXY,r.PULSE,r.SUGAR_LEVEL],_=(E={},(0,p.Z)(E,r.TEMP,"Temperature"),(0,p.Z)(E,r.OXY,"Blood Oxygen Level"),(0,p.Z)(E,r.PULSE,"Pulse"),(0,p.Z)(E,r.SUGAR_LEVEL,"Blood Glucose"),E);function C(e){return _[e]}function L(e){return Z.i.getBoolean(Z.u.tempIsCelcius,!1)?{unitString:" \xb0C",num:5*e}:{unitString:" \xb0F",num:9*e+32}}function b(e){switch(e.itemType){case r.TEMP:var n=L(e.value),t=n.unitString,i=n.num;return"".concat(i.toFixed(2)," ").concat(t);case r.OXY:return"".concat(e.value,"% SpO2");case r.PULSE:return"".concat(e.value," bpm");case r.SUGAR_LEVEL:return"".concat(e.value," mg/dl")}}var y,S,N,T={dateStyle:"short",timeStyle:"short"},O=(y={},(0,p.Z)(y,r.OXY,{addFormHeadingText:"Add Oxygen reading",addLabel:"SpO2 reading (%)",addPlaceHolder:C(r.OXY)}),(0,p.Z)(y,r.TEMP,{addFormHeadingText:"Add Temperature reading",addLabel:"Temperature reading",addPlaceHolder:C(r.TEMP)}),(0,p.Z)(y,r.PULSE,{addFormHeadingText:"Add Pulse Reading",addLabel:"Pulse Reading (bpm)",addPlaceHolder:C(r.PULSE)}),(0,p.Z)(y,r.SUGAR_LEVEL,{addFormHeadingText:"Add Blood Sugar Reading",addLabel:"Blood Sugar levels (mg/dl)",addPlaceHolder:C(r.SUGAR_LEVEL)}),y),w={inputValueStep:(S={},(0,p.Z)(S,r.TEMP,.01),(0,p.Z)(S,r.OXY,1),(0,p.Z)(S,r.SUGAR_LEVEL,1),(0,p.Z)(S,r.PULSE,1),S),inputValueMax:(N={},(0,p.Z)(N,r.TEMP,150),(0,p.Z)(N,r.OXY,100),(0,p.Z)(N,r.SUGAR_LEVEL,300),(0,p.Z)(N,r.PULSE,300),N)};function P(e,n){return w[n][e]}var A=t(1178),M=t(3288);function I(e,n,t,r){return"".concat(e,":").concat(t,":").concat(null!==r&&void 0!==r?r:"",":").concat(n)}var k=t(2255),F=function(e){var n=e.item,t=e.eventKey,a=e.updateData,l=e.setSelectedEditItem,d=e.setShowEditModal,h=n.date,v=n.itemType,x=n.desc,p=(0,u.useState)(!1),Z=p[0],E=p[1],j=function(){return E(!1)},_=function(){var e=(0,c.Z)((function(){var e;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,A.x.delete(h)];case 1:return n.sent(),E(!1),[4,a()];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),console.log("Failed to delete",e),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(k.Z,{bg:"dark",children:[(0,i.jsx)(o.Z.Toggle,{as:k.Z.Header,eventKey:t,children:"".concat(h.toLocaleString("en-us",T)," ").concat(C(v)," - ").concat(b(n))}),(0,i.jsx)(o.Z.Collapse,{eventKey:t,children:(0,i.jsxs)(k.Z.Body,{children:[(0,i.jsxs)(k.Z.Text,{children:[C(v)," - ",b(n),(0,i.jsx)("br",{}),x]}),(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(g.Z,{variant:"secondary",onClick:function(){l(function(e){var n=e.value;if(e.itemType==r.TEMP){var t=L(n).num;e.value=t}return e}(n)),d(!0)},children:"Edit"}),(0,i.jsx)(g.Z,{variant:"warning",onClick:function(){return E(!0)},children:"Delete"})]})]})})]}),(0,i.jsxs)(m.Z,{show:Z,onHide:j,children:[(0,i.jsx)(m.Z.Header,{children:"Delete?"}),(0,i.jsx)(m.Z.Body,{children:"Confirm Delete?"}),(0,i.jsxs)(m.Z.Footer,{children:[(0,i.jsx)(g.Z,{variant:"secondary",onClick:j,children:"Cancel"}),(0,i.jsx)(g.Z,{variant:"primary",onClick:_,children:"Confirm"})]})]})]})},H=t(4835),D=function(e){var n=e.showCreateForm,t=e.itemType,a=e.existingItem,o=e.setShowCreateForm,l=e.setExistingItem,d=e.updateData,h=(0,u.useRef)(null);return(0,u.useEffect)((function(){n?null!==a&&(null!=h.current&&(h.current.numinput.value=a.value,h.current.desc.value=a.desc),t!==a.itemType&&console.warn("Detected mismatch, please report",t,a)):l(null)}),[n]),(0,i.jsx)(m.Z,{show:n,onHide:function(){l(null),o(!1)},children:(0,i.jsxs)(H.Z,{ref:h,onSubmit:function(){var e=(0,c.Z)((function(e){var n,i,c,u;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:return e.preventDefault(),n=e.target,i=parseFloat(n.numinput.value),c=n.desc.value,u=function(e){return e.itemType===r.TEMP&&(e.value=function(e){return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?(e-32)/9:e/5}(e.value,Z.i.getBoolean(Z.u.tempIsCelcius))),e}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.TEMP,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return{itemType:e,date:n,value:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,desc:arguments.length>3&&void 0!==arguments[3]?arguments[3]:""}}(t,null===a||void 0===a?void 0:a.date,i,c)),[4,A.x.edit(null===a||void 0===a?void 0:a.date,u)];case 1:return s.sent(),o(!1),[4,d()];case 2:return s.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),children:[(0,i.jsx)(m.Z.Header,{children:O[t].addFormHeadingText}),(0,i.jsxs)(m.Z.Body,{children:[(0,i.jsxs)(H.Z.Group,{children:[(0,i.jsx)(H.Z.Label,{children:O[t].addLabel}),(0,i.jsx)(H.Z.Control,{placeholder:O[t].addPlaceHolder,type:"number",name:"numinput",min:0,max:P(t,"inputValueMax"),step:P(t,"inputValueStep"),defaultValue:null===a||void 0===a?void 0:a.value})]}),(0,i.jsxs)(H.Z.Group,{controlId:"exampleForm.ControlTextarea1",children:[(0,i.jsx)(H.Z.Label,{children:"Description"}),(0,i.jsx)(H.Z.Control,{as:"textarea",rows:3,placeholder:"Description -- E.g. Medicines taken (Optional)",name:"desc",defaultValue:null===a||void 0===a?void 0:a.desc})]})]}),(0,i.jsxs)(m.Z.Footer,{children:[(0,i.jsx)(g.Z,{variant:"secondary",onClick:function(){o(!1)},children:"Cancel"}),(0,i.jsx)(g.Z,{variant:"primary",type:"submit",children:"Confirm"})]})]})})},U=function(){var e=(0,u.useState)(0),n=e[0],t=e[1],a=15*n,p=(0,u.useState)(0),Z=p[0],E=p[1];function _(){return L.apply(this,arguments)}function L(){return(L=(0,c.Z)((function(){var e;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,A.x.getCount()];case 1:return e=n.sent(),E(Math.ceil(e/15)),[2]}}))}))).apply(this,arguments)}(0,u.useEffect)((function(){_().catch((function(e){return console.error("Error fetching page count",e)}))}),[]);var b,y,S=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return(0,M.ZP)(I(e,n,t,r),(function(){return A.x.getFromOffset(t,r,n)}),i)}("getVal",!0,a,15,{refreshInterval:2e3}),N=S.data,T=S.error,O=S.mutate,w=function(){var e=(0,c.Z)((function(){return(0,s.__generator)(this,(function(e){switch(e.label){case 0:return[4,_()];case 1:return e.sent(),[4,O(void 0,!0)];case 2:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),P=(0,u.useState)(!1),k=P[0],H=P[1],U=(0,u.useState)(r.TEMP),V=U[0],B=U[1],R=(0,u.useState)(!1),X=R[0],G=R[1],K=(0,u.useState)(null),Y=K[0],z=K[1],J=function(){var e=(0,c.Z)((function(){var e;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,A.x.clear()];case 1:return n.sent(),[4,w()];case 2:return n.sent(),H(!1),[3,4];case 3:return e=n.sent(),console.log("Failed to clear",e),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return b=T?(0,i.jsxs)("div",{children:["Error ",T.toString()]}):N?0===(null!==(y=N.length)&&void 0!==y?y:0)?(0,i.jsx)("div",{style:{textAlign:"center"},children:"Nothing here yet! :)"}):(0,i.jsx)(o.Z,{children:N.map((function(e){return(0,i.jsx)(F,{item:e,eventKey:JSON.stringify(e),setSelectedEditItem:z,setShowEditModal:G,updateData:w},JSON.stringify(e))}))}):(0,i.jsx)("div",{children:"Loading"}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.Z,{style:{textAlign:"center"},md:8,children:(0,i.jsx)(d.Z,{md:{span:6,offset:3},children:(0,i.jsxs)(h.Z,{className:"justify-content-between",children:[(0,i.jsx)(f.Z,{"aria-label":"Buttons",className:"spacer-top-margin",children:(0,i.jsx)(v.Z,{as:f.Z,title:"Add",children:j.map((function(e,n){return(0,i.jsx)(x.Z.Item,{eventKey:"".concat(n),onClick:function(){B(e),G(!0)},children:C(e)},e)}))})}),(0,i.jsxs)(f.Z,{className:"spacer-top-margin",children:[(0,i.jsx)(g.Z,{onClick:function(){return w()},children:"Refresh"}),(0,i.jsx)(g.Z,{onClick:function(){return H(!0)},children:"Clear"})]})]})})}),(0,i.jsxs)(m.Z,{show:k,onHide:function(){return H(!1)},children:[(0,i.jsx)(m.Z.Header,{children:"Clear?"}),(0,i.jsx)(m.Z.Body,{children:"Confirm Clearing all entries?"}),(0,i.jsxs)(m.Z.Footer,{children:[(0,i.jsx)(g.Z,{variant:"secondary",onClick:function(){return H(!1)},children:"Cancel"}),(0,i.jsx)(g.Z,{variant:"danger",onClick:J,children:"Confirm"})]})]}),(0,i.jsx)(D,{itemType:V,showCreateForm:X,setShowCreateForm:G,updateData:w,existingItem:Y,setExistingItem:z}),(0,i.jsx)("br",{}),b,(0,i.jsx)(l.Z,{style:{textAlign:"center"},md:8,children:(0,i.jsx)(d.Z,{md:{span:6,offset:3},children:Z>0&&(0,i.jsxs)(f.Z,{className:"spacer-top-margin-lot",children:[(0,i.jsx)(g.Z,{disabled:n<=1,onClick:function(){t(n>Z||n<1?0:n-1)},children:"Prev"}),(0,i.jsx)(g.Z,{disabled:!0,children:"".concat(n+1,"/").concat(Z)}),(0,i.jsx)(g.Z,{disabled:n+1>=Z,onClick:function(){n<Z-1&&t(n+1)},children:"Next"})]})})}),(0,i.jsx)("div",{className:"spacer-top-margin-lot"})]})},V=t(682),B=function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.h,{title:"Log",activeKey:"home"}),(0,i.jsx)(V.Z,{children:(0,i.jsx)(U,{})})]})}}},function(e){e.O(0,[365,937,19,774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);